<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="èµ„äº§è´Ÿå€ºè¡¨">
<meta name="theme-color" content="#f2f2f7">
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">
<title>ä¸ªäººèµ„äº§è´Ÿå€ºè¡¨</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<style>
:root{--bg:#f2f2f7;--card:#fff;--text:#1c1c1e;--text2:#8e8e93;--text3:#aeaeb2;--border:rgba(60,60,67,.1);--primary:#007aff;--success:#34c759;--danger:#ff3b30;--warning:#ff9500;--shadow:0 1px 3px rgba(0,0,0,.08);--radius:16px;--radius-sm:12px}
.dark{--bg:#000;--card:#1c1c1e;--text:#f5f5f7;--text2:#8e8e93;--text3:#636366;--border:rgba(255,255,255,.08);--primary:#0a84ff;--success:#30d158;--danger:#ff453a;--warning:#ff9f0a;--shadow:none}
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
body{font-family:-apple-system,BlinkMacSystemFont,'SF Pro Display','SF Pro Text','PingFang SC','Helvetica Neue',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;transition:background .3s,color .3s;-webkit-font-smoothing:antialiased}
.app{display:flex;min-height:100vh}

/* === Desktop Sidebar === */
.sidebar{width:220px;background:var(--card);border-right:1px solid var(--border);padding:20px 0;display:flex;flex-direction:column;position:fixed;top:0;left:0;bottom:0;z-index:100;transition:background .3s}
.sidebar .logo{padding:0 20px 20px;font-size:18px;font-weight:700;color:var(--primary);border-bottom:1px solid var(--border);margin-bottom:10px}
.sidebar .logo span{font-size:12px;color:var(--text2);display:block;font-weight:400;margin-top:4px}
.nav-item{padding:12px 20px;cursor:pointer;display:flex;align-items:center;gap:10px;color:var(--text2);transition:all .2s;font-size:14px;border-left:3px solid transparent}
.nav-item:hover{background:var(--bg);color:var(--text)}
.nav-item.active{color:var(--primary);border-left-color:var(--primary);background:var(--bg);font-weight:600}
.nav-item .icon{font-size:18px;width:24px;text-align:center}
.sidebar-footer{margin-top:auto;padding:10px 20px;border-top:1px solid var(--border)}
.theme-btn{width:100%;padding:8px;border:1px solid var(--border);border-radius:8px;background:var(--bg);color:var(--text);cursor:pointer;font-size:13px;transition:all .2s}
.theme-btn:hover{border-color:var(--primary)}
.main{margin-left:220px;flex:1;padding:24px;min-height:100vh}

/* === Mobile Header (iOS Navigation Bar) === */
.mobile-header{display:none;position:fixed;top:0;left:0;right:0;z-index:99;padding:0 16px;padding-top:env(safe-area-inset-top,0);height:calc(56px + env(safe-area-inset-top,0));background:rgba(242,242,247,.85);-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px);border-bottom:0.5px solid var(--border);display:none;justify-content:space-between;align-items:center}
.dark .mobile-header{background:rgba(0,0,0,.85)}
.mobile-header .header-inner{display:flex;justify-content:space-between;align-items:center;width:100%;height:56px}
.mobile-header .mobile-brand{min-width:0;display:flex;flex-direction:column;justify-content:center}
.mobile-header .mobile-brand-title{font-size:18px;font-weight:700;line-height:1.15;letter-spacing:-.01em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.mobile-header .mobile-brand-subtitle{font-size:11px;color:var(--text2);line-height:1.2;margin-top:2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.mobile-header .theme-toggle{width:32px;height:32px;border-radius:50%;border:none;background:var(--border);color:var(--text);font-size:16px;cursor:pointer;display:flex;align-items:center;justify-content:center}

/* === Mobile Tab Bar (iOS Style) === */
.mobile-nav{display:none;position:fixed;bottom:0;left:0;right:0;z-index:100;background:rgba(242,242,247,.85);-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px);border-top:0.5px solid var(--border);padding:4px 0 env(safe-area-inset-bottom,8px);justify-content:space-around}
.dark .mobile-nav{background:rgba(0,0,0,.85)}
.mobile-nav .mob-item{display:flex;flex-direction:column;align-items:center;gap:1px;padding:4px 2px;cursor:pointer;color:var(--text2);font-size:10px;transition:color .15s;min-width:0;flex:1}
.mobile-nav .mob-item.active{color:var(--primary)}
.mobile-nav .mob-item .icon{font-size:24px;height:28px;display:flex;align-items:center;justify-content:center}
.mobile-nav .mob-item .tab-label{font-size:10px;font-weight:500;letter-spacing:-.02em}

@media(max-width:768px){
  .sidebar{display:none}
  .main{margin-left:0;padding:0;padding-top:calc(56px + env(safe-area-inset-top,0));padding-bottom:calc(70px + env(safe-area-inset-bottom,8px))}
  .mobile-nav{display:flex}
  .mobile-header{display:flex}
  .page-content{padding:12px 16px}
  .page-title{font-size:28px;font-weight:700;margin-bottom:16px;letter-spacing:-.02em}
  #page-dashboard .page-title{display:none}

  /* iOS style cards */
  .card{border-radius:var(--radius);padding:16px;box-shadow:none;margin-bottom:10px}
  .card-value{font-size:24px}

  /* Stats grid: 2x2 on mobile */
  .stats-grid{grid-template-columns:repeat(2,1fr)!important;gap:10px!important;margin-bottom:16px}
  .charts-grid{grid-template-columns:1fr;gap:10px}

  /* Summary info bars */
  .interest-info,.debt-summary,.income-summary{border-radius:var(--radius);padding:14px;margin-bottom:10px}
  .interest-info .value,.debt-summary .value,.income-summary .value{font-size:18px}

  /* Table as card list on mobile */
  .table-wrap{overflow-x:visible}
  .mobile-card-list .m-card{background:var(--card);border-radius:var(--radius-sm);padding:14px 16px;margin-bottom:8px;position:relative}
  .mobile-card-list .m-card-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px}
  .mobile-card-list .m-card-title{font-weight:600;font-size:15px}
  .mobile-card-list .m-card-subtitle{font-size:13px;color:var(--text2)}
  .mobile-card-list .m-card-amount{font-size:17px;font-weight:700;font-variant-numeric:tabular-nums}
  .mobile-card-list .m-card-row{display:flex;justify-content:space-between;font-size:13px;color:var(--text2);padding:2px 0}
  .mobile-card-list .m-card-actions{display:flex;gap:8px;margin-top:10px;padding-top:10px;border-top:0.5px solid var(--border)}

  /* Buttons */
  .btn{border-radius:var(--radius-sm);padding:10px 18px;font-size:15px}
  .btn-sm{padding:7px 14px;font-size:13px;border-radius:8px}
  .flex-between .btn-primary{border-radius:20px;padding:8px 16px;font-size:14px}

  /* Modal as iOS bottom sheet */
  .modal-overlay.show{align-items:flex-end}
  .modal{width:100%;max-width:100%;border-radius:16px 16px 0 0;padding:0 16px 16px;padding-bottom:calc(16px + env(safe-area-inset-bottom,0));max-height:92vh;animation:sheetUp .3s ease}
  .modal::before{content:'';display:block;width:36px;height:5px;background:var(--text3);border-radius:3px;margin:10px auto 14px}
  .modal-title{font-size:17px;font-weight:600;text-align:center;margin-bottom:18px}
  @keyframes sheetUp{from{transform:translateY(100%)}to{transform:translateY(0)}}

  /* Form inputs iOS style */
  .form-group{margin-bottom:12px}
  .form-group label{font-size:13px;color:var(--text2);margin-bottom:5px;font-weight:500}
  .form-group input,.form-group select{height:44px;padding:0 14px;border-radius:var(--radius-sm);font-size:16px;border:0.5px solid var(--border);background:var(--card)}
  .form-group input:focus,.form-group select:focus{border-color:var(--primary);box-shadow:0 0 0 3px rgba(0,122,255,.12)}
  .form-row{gap:8px}
  .modal-actions{gap:8px;padding-top:8px}
  .modal-actions .btn{flex:1;justify-content:center;height:44px;font-size:16px;font-weight:600;border-radius:var(--radius-sm)}

  /* Empty state */
  .empty{padding:48px 20px}
  .empty .icon{font-size:56px;margin-bottom:16px}

  /* Hide desktop table, show mobile cards */
  .desktop-only{display:none!important}
  .mobile-only{display:block!important}
}

@media(min-width:769px){
  .mobile-only{display:none!important}
  .desktop-only{display:block!important}
}

/* === Shared Styles === */
.card{background:var(--card);border-radius:var(--radius);padding:20px;box-shadow:var(--shadow);margin-bottom:16px;transition:background .3s}
.card-title{font-size:13px;color:var(--text2);margin-bottom:6px;font-weight:500}
.card-value{font-size:28px;font-weight:700;letter-spacing:-.02em}
.card-value.positive{color:var(--success)}
.card-value.negative{color:var(--danger)}
.stats-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-bottom:24px}
.charts-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:16px;margin-bottom:24px}
.page{display:none}.page.active{display:block}
.page-title{font-size:22px;font-weight:700;margin-bottom:20px}
.table-wrap{overflow-x:auto}
table{width:100%;border-collapse:collapse;font-size:14px}
th,td{padding:10px 12px;text-align:left;border-bottom:1px solid var(--border);white-space:nowrap}
th{color:var(--text2);font-weight:600;font-size:12px;text-transform:uppercase}
tr:hover{background:var(--bg)}
.btn{padding:8px 16px;border:none;border-radius:8px;cursor:pointer;font-size:13px;font-weight:600;transition:all .2s;display:inline-flex;align-items:center;gap:6px}
.btn-primary{background:var(--primary);color:#fff}.btn-primary:hover{opacity:.85}
.btn-danger{background:var(--danger);color:#fff}.btn-danger:hover{opacity:.85}
.btn-outline{background:transparent;border:1px solid var(--border);color:var(--text)}.btn-outline:hover{border-color:var(--primary);color:var(--primary)}
.btn-sm{padding:5px 10px;font-size:12px}
.modal-overlay{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.4);z-index:200;justify-content:center;align-items:center}
.modal-overlay.show{display:flex}
.modal{background:var(--card);border-radius:var(--radius);padding:24px;width:90%;max-width:520px;max-height:90vh;overflow-y:auto}
.modal-title{font-size:18px;font-weight:700;margin-bottom:16px}
.form-group{margin-bottom:14px}
.form-group label{display:block;font-size:13px;color:var(--text2);margin-bottom:4px}
.form-group input,.form-group select{width:100%;padding:9px 12px;border:1px solid var(--border);border-radius:8px;background:var(--bg);color:var(--text);font-size:14px;outline:none;transition:border .2s}
.form-group input:focus,.form-group select:focus{border-color:var(--primary)}
.form-row{display:flex;gap:10px}
.form-row .form-group{flex:1}
.modal-actions{display:flex;gap:10px;justify-content:flex-end;margin-top:16px}
.tag{display:inline-block;padding:3px 8px;border-radius:6px;font-size:11px;font-weight:600}
.tag-asset{background:rgba(52,199,89,.12);color:var(--success)}
.tag-liability{background:rgba(255,59,48,.1);color:var(--danger)}
.tag-income{background:rgba(255,149,0,.12);color:var(--warning)}
.amount{font-weight:600;font-variant-numeric:tabular-nums}
.empty{text-align:center;padding:40px 20px;color:var(--text2)}
.empty .icon{font-size:48px;margin-bottom:12px}
.flex-between{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:10px}
.mb-16{margin-bottom:16px}
.text-right{text-align:right}
.interest-info{background:linear-gradient(135deg,rgba(0,122,255,.08),rgba(52,199,89,.08));border-radius:var(--radius);padding:16px;margin-bottom:16px}
.interest-info .label{font-size:12px;color:var(--text2)}
.interest-info .value{font-size:20px;font-weight:700;color:var(--primary)}
.debt-summary{background:linear-gradient(135deg,rgba(255,59,48,.06),rgba(255,149,0,.06));border-radius:var(--radius);padding:16px;margin-bottom:16px}
.debt-summary .label{font-size:12px;color:var(--text2)}
.debt-summary .value{font-size:20px;font-weight:700;color:var(--danger)}
.income-summary{background:linear-gradient(135deg,rgba(255,149,0,.08),rgba(255,59,48,.04));border-radius:var(--radius);padding:16px;margin-bottom:16px}
.income-summary .label{font-size:12px;color:var(--text2)}
.income-summary .value{font-size:20px;font-weight:700;color:var(--warning)}
.section-divider{border:none;border-top:0.5px solid var(--border);margin:14px 0}
.hint{font-size:11px;color:var(--text2);margin-top:2px}
.page-content{padding:0}

/* Keep responsive rules at the end so they are not overridden by base styles */
@media(max-width:768px){
  .sidebar{display:none}
  .main{margin-left:0;padding:0;padding-top:calc(56px + env(safe-area-inset-top,0));padding-bottom:calc(70px + env(safe-area-inset-bottom,8px))}
  .mobile-nav{display:flex}
  .mobile-header{display:flex}
  .page-content{padding:12px 16px}
  .page-title{font-size:28px;font-weight:700;margin-bottom:16px;letter-spacing:-.02em}
  #page-dashboard .page-title{display:none}

  .card{border-radius:var(--radius);padding:16px;box-shadow:none;margin-bottom:10px}
  .card-value{font-size:24px}
  .stats-grid{grid-template-columns:repeat(2,1fr)!important;gap:10px!important;margin-bottom:16px}
  .charts-grid{grid-template-columns:1fr;gap:10px}

  .interest-info,.debt-summary,.income-summary{border-radius:var(--radius);padding:14px;margin-bottom:10px}
  .interest-info .value,.debt-summary .value,.income-summary .value{font-size:18px}

  .table-wrap{overflow-x:auto;-webkit-overflow-scrolling:touch}

  .mobile-card-list .m-card{background:var(--card);border-radius:var(--radius-sm);padding:14px 16px;margin-bottom:8px;position:relative}
  .mobile-card-list .m-card-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px}
  .mobile-card-list .m-card-title{font-weight:600;font-size:15px}
  .mobile-card-list .m-card-subtitle{font-size:13px;color:var(--text2)}
  .mobile-card-list .m-card-amount{font-size:17px;font-weight:700;font-variant-numeric:tabular-nums}
  .mobile-card-list .m-card-row{display:flex;justify-content:space-between;font-size:13px;color:var(--text2);padding:2px 0}
  .mobile-card-list .m-card-actions{display:flex;gap:8px;margin-top:10px;padding-top:10px;border-top:0.5px solid var(--border)}

  .btn{border-radius:var(--radius-sm);padding:10px 18px;font-size:15px}
  .btn-sm{padding:7px 14px;font-size:13px;border-radius:8px}
  .flex-between .btn-primary{border-radius:20px;padding:8px 16px;font-size:14px}

  .modal-overlay.show{align-items:flex-end}
  .modal{width:100%;max-width:100%;border-radius:16px 16px 0 0;padding:0 16px 16px;padding-bottom:calc(16px + env(safe-area-inset-bottom,0));max-height:92vh;animation:sheetUp .3s ease}
  .modal::before{content:'';display:block;width:36px;height:5px;background:var(--text3);border-radius:3px;margin:10px auto 14px}
  .modal-title{font-size:17px;font-weight:600;text-align:center;margin-bottom:18px}

  .form-group{margin-bottom:12px}
  .form-group label{font-size:13px;color:var(--text2);margin-bottom:5px;font-weight:500}
  .form-group input,.form-group select{height:44px;padding:0 14px;border-radius:var(--radius-sm);font-size:16px;border:0.5px solid var(--border);background:var(--card)}
  .form-group input:focus,.form-group select:focus{border-color:var(--primary);box-shadow:0 0 0 3px rgba(0,122,255,.12)}
  .form-row{gap:8px}
  .modal-actions{gap:8px;padding-top:8px}
  .modal-actions .btn{flex:1;justify-content:center;height:44px;font-size:16px;font-weight:600;border-radius:var(--radius-sm)}

  .empty{padding:48px 20px}
  .empty .icon{font-size:56px;margin-bottom:16px}

  .desktop-only{display:none!important}
  .mobile-only{display:block!important}
}

@media(min-width:769px){
  .mobile-only{display:none!important}
  .desktop-only{display:block!important}
}
</style>
</head>
<body>

<div class="sidebar">
  <div class="logo">ğŸ’° èµ„äº§è´Ÿå€ºè¡¨<span>ä¸ªäººè´¢åŠ¡ç®¡ç†å·¥å…·</span></div>
  <div class="nav-item active" data-page="dashboard"><span class="icon">ğŸ“Š</span>ä»ªè¡¨ç›˜</div>
  <div class="nav-item" data-page="assets"><span class="icon">ğŸ“ˆ</span>èµ„äº§ç®¡ç†</div>
  <div class="nav-item" data-page="liabilities"><span class="icon">ğŸ“‰</span>è´Ÿå€ºç®¡ç†</div>
  <div class="nav-item" data-page="loans"><span class="icon">ğŸ¦</span>å€Ÿå‡ºæ¬¾ç®¡ç†</div>
  <div class="nav-item" data-page="incomes"><span class="icon">ğŸ’¼</span>ä¸»åŠ¨æ”¶å…¥</div>
  <div class="nav-item" data-page="settings"><span class="icon">âš™ï¸</span>æ•°æ®ç®¡ç†</div>
  <div class="sidebar-footer">
    <button class="theme-btn" onclick="toggleTheme()">ğŸŒ™ åˆ‡æ¢ä¸»é¢˜</button>
  </div>
</div>

<div class="mobile-header">
  <div class="header-inner">
    <div class="mobile-brand">
      <div class="mobile-brand-title" id="mobileTitle">èµ„äº§è´Ÿå€ºè¡¨</div>
      <div class="mobile-brand-subtitle" id="mobileSubtitle">è´¢å¯Œè‡ªç”±ä¹‹è·¯</div>
    </div>
    <button class="theme-toggle" onclick="toggleTheme()">ğŸŒ™</button>
  </div>
</div>

<div class="mobile-nav">
  <div class="mob-item active" data-page="dashboard"><span class="icon">ğŸ“Š</span><span class="tab-label">æ€»è§ˆ</span></div>
  <div class="mob-item" data-page="assets"><span class="icon">ğŸ“ˆ</span><span class="tab-label">èµ„äº§</span></div>
  <div class="mob-item" data-page="liabilities"><span class="icon">ğŸ“‰</span><span class="tab-label">è´Ÿå€º</span></div>
  <div class="mob-item" data-page="loans"><span class="icon">ğŸ¦</span><span class="tab-label">å€Ÿå‡º</span></div>
  <div class="mob-item" data-page="incomes"><span class="icon">ğŸ’¼</span><span class="tab-label">æ”¶å…¥</span></div>
  <div class="mob-item" data-page="settings"><span class="icon">âš™ï¸</span><span class="tab-label">è®¾ç½®</span></div>
</div>

<div class="app">
<div class="main">

<!-- ä»ªè¡¨ç›˜ -->
<div class="page active" id="page-dashboard">
  <div class="page-content">
  <div class="page-title">ä»ªè¡¨ç›˜</div>
  <div class="stats-grid" style="grid-template-columns:repeat(4,1fr)">
    <div class="card"><div class="card-title">æ€»èµ„äº§</div><div class="card-value positive" id="totalAssets">Â¥0.00</div></div>
    <div class="card"><div class="card-title">æ€»è´Ÿå€º</div><div class="card-value negative" id="totalLiabilities">Â¥0.00</div></div>
    <div class="card"><div class="card-title">å‡€èµ„äº§</div><div class="card-value" id="netWorth">Â¥0.00</div></div>
    <div class="card"><div class="card-title">æ¯æœˆç°é‡‘æµ</div><div class="card-value" id="monthlyCashFlow">Â¥0.00</div><div style="font-size:11px;color:var(--text2);margin-top:4px" id="cashFlowDetail"></div></div>
  </div>
  <div class="charts-grid">
    <div class="card"><div class="card-title">èµ„äº§æ„æˆï¼ˆTop 5ï¼‰</div><canvas id="assetChart" height="260"></canvas></div>
    <div class="card"><div class="card-title">è´Ÿå€ºæ„æˆï¼ˆTop 5ï¼‰</div><canvas id="liabilityChart" height="260"></canvas></div>
  </div>
  <div class="card desktop-only">
    <div class="card-title">èµ„äº§è´Ÿå€ºæ˜ç»†</div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>ç±»åˆ«</th><th>ç±»å‹</th><th>åç§°</th><th class="text-right">é‡‘é¢ (Â¥)</th></tr></thead>
        <tbody id="summaryTable"></tbody>
      </table>
    </div>
  </div>
  <div class="mobile-only mobile-card-list" id="summaryCardList"></div>
  </div>
</div>

<!-- èµ„äº§ç®¡ç† -->
<div class="page" id="page-assets">
  <div class="page-content">
  <div class="flex-between mb-16">
    <div class="page-title" style="margin:0">èµ„äº§ç®¡ç†</div>
    <button class="btn btn-primary" onclick="openModal('asset')">ï¼‹ æ·»åŠ èµ„äº§</button>
  </div>
  <div class="interest-info">
    <div style="display:flex;gap:24px;flex-wrap:wrap">
      <div><div class="label">èµ„äº§æ€»é¢ (æŠ˜åˆäººæ°‘å¸)</div><div class="value" id="totalAssetsSum">Â¥0.00</div></div>
      <div><div class="label">é¢„ä¼°æœˆæ”¶ç›Š</div><div class="value" id="totalMonthlyIncome">Â¥0.00</div></div>
      <div><div class="label">é¢„ä¼°å¹´æ”¶ç›Š</div><div class="value" id="totalAnnualIncome">Â¥0.00</div></div>
    </div>
    <div id="ratesInfo" style="font-size:11px;color:var(--text2);margin-top:8px;line-height:1.6"></div>
  </div>
  <div class="card desktop-only">
    <div class="table-wrap">
      <table>
        <thead><tr><th>ç±»åˆ«</th><th>åç§°</th><th>å¸ç§</th><th>é‡‘é¢</th><th>å¹´åŒ–æ”¶ç›Šç‡</th><th>æœˆæ”¶ç›Š</th><th>å¹´æ”¶ç›Š</th><th>å¤‡æ³¨</th><th>æ“ä½œ</th></tr></thead>
        <tbody id="assetsTable"></tbody>
      </table>
    </div>
    <div class="empty" id="assetsEmpty" style="display:none"><div class="icon">ğŸ“­</div>æš‚æ— èµ„äº§è®°å½•ï¼Œç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æ·»åŠ </div>
  </div>
  <div class="mobile-only mobile-card-list" id="assetsCardList"></div>
  </div>
</div>

<!-- è´Ÿå€ºç®¡ç† -->
<div class="page" id="page-liabilities">
  <div class="page-content">
  <div class="flex-between mb-16">
    <div class="page-title" style="margin:0">è´Ÿå€ºç®¡ç†</div>
    <button class="btn btn-primary" onclick="openModal('liability')">ï¼‹ æ·»åŠ è´Ÿå€º</button>
  </div>
  <div class="debt-summary">
    <div style="display:flex;gap:24px;flex-wrap:wrap">
      <div><div class="label">å‰©ä½™è´Ÿå€ºæ€»é¢</div><div class="value" id="totalRemainingDebt">Â¥0.00</div></div>
      <div><div class="label">æ¯æœˆè¿˜æ¬¾æ€»é¢</div><div class="value" id="totalMonthlyPayment">Â¥0.00</div></div>
    </div>
  </div>
  <div class="card desktop-only">
    <div class="table-wrap">
      <table>
        <thead><tr><th>ç±»åˆ«</th><th>åç§°</th><th>è´·æ¬¾æ€»é¢</th><th>æ€»æœŸæ•°</th><th>å·²è¿˜æœŸæ•°</th><th>å‰©ä½™æœ¬é‡‘</th><th>æœˆè¿˜æœ¬é‡‘</th><th>æœˆåˆ©æ¯</th><th>è´¹ç‡</th><th>è¿˜æ¬¾æ—¥</th><th class="text-right">æœˆè¿˜æ€»é¢</th><th>æ“ä½œ</th></tr></thead>
        <tbody id="liabilitiesTable"></tbody>
      </table>
    </div>
    <div class="empty" id="liabilitiesEmpty" style="display:none"><div class="icon">ğŸ“­</div>æš‚æ— è´Ÿå€ºè®°å½•ï¼Œç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æ·»åŠ </div>
  </div>
  <div class="mobile-only mobile-card-list" id="liabilitiesCardList"></div>
  </div>
</div>

<!-- å€Ÿå‡ºæ¬¾ç®¡ç† -->
<div class="page" id="page-loans">
  <div class="page-content">
  <div class="flex-between mb-16">
    <div class="page-title" style="margin:0">å€Ÿå‡ºæ¬¾ç®¡ç†</div>
    <button class="btn btn-primary" onclick="openModal('loan')">ï¼‹ æ·»åŠ å€Ÿå‡ºæ¬¾</button>
  </div>
  <div class="interest-info">
    <div style="display:flex;gap:24px;flex-wrap:wrap">
      <div><div class="label">å€Ÿå‡ºæœ¬é‡‘æ€»è®¡</div><div class="value" id="totalLoanPrincipal">Â¥0.00</div></div>
      <div><div class="label">ç´¯è®¡åº”æ”¶åˆ©æ¯</div><div class="value" id="totalLoanInterest">Â¥0.00</div></div>
      <div><div class="label">æœ¬æ¯åˆè®¡</div><div class="value" id="totalLoanAll">Â¥0.00</div></div>
    </div>
  </div>
  <div class="card desktop-only">
    <div class="table-wrap">
      <table>
        <thead><tr><th>å€Ÿæ¬¾äºº</th><th>æœ¬é‡‘</th><th>åˆ©ç‡</th><th>åˆ©ç‡ç±»å‹</th><th>èµ·å§‹æ—¥æœŸ</th><th>è¿˜æ¬¾æ—¥</th><th>å·²æ”¶æœŸæ•°</th><th class="text-right">ç´¯è®¡åˆ©æ¯</th><th>æ“ä½œ</th></tr></thead>
        <tbody id="loansTable"></tbody>
      </table>
    </div>
    <div class="empty" id="loansEmpty" style="display:none"><div class="icon">ğŸ“­</div>æš‚æ— å€Ÿå‡ºæ¬¾è®°å½•</div>
  </div>
  <div class="mobile-only mobile-card-list" id="loansCardList"></div>
  </div>
</div>

<!-- ä¸»åŠ¨æ”¶å…¥ -->
<div class="page" id="page-incomes">
  <div class="page-content">
  <div class="flex-between mb-16">
    <div class="page-title" style="margin:0">ä¸»åŠ¨æ”¶å…¥</div>
    <button class="btn btn-primary" onclick="openModal('income')">ï¼‹ æ·»åŠ æ”¶å…¥</button>
  </div>
  <div class="income-summary">
    <div style="display:flex;gap:24px;flex-wrap:wrap">
      <div><div class="label">æœˆä¸»åŠ¨æ”¶å…¥æ€»é¢</div><div class="value" id="totalActiveIncome">Â¥0.00</div></div>
      <div><div class="label">å¹´ä¸»åŠ¨æ”¶å…¥æ€»é¢</div><div class="value" id="totalActiveIncomeYear">Â¥0.00</div></div>
    </div>
  </div>
  <div class="card desktop-only">
    <div class="table-wrap">
      <table>
        <thead><tr><th>ç±»åˆ«</th><th>åç§°</th><th class="text-right">æœˆæ”¶å…¥ (Â¥)</th><th>å¤‡æ³¨</th><th>æ“ä½œ</th></tr></thead>
        <tbody id="incomesTable"></tbody>
      </table>
    </div>
    <div class="empty" id="incomesEmpty" style="display:none"><div class="icon">ğŸ“­</div>æš‚æ— ä¸»åŠ¨æ”¶å…¥è®°å½•</div>
  </div>
  <div class="mobile-only mobile-card-list" id="incomesCardList"></div>
  </div>
</div>

<!-- æ•°æ®ç®¡ç† -->
<div class="page" id="page-settings">
  <div class="page-content">
  <div class="page-title">æ•°æ®ç®¡ç†</div>
  <div class="card">
    <h3 style="margin-bottom:12px">å¯¼å‡ºæ•°æ®</h3>
    <p style="color:var(--text2);font-size:13px;margin-bottom:12px">å°†æ‰€æœ‰æ•°æ®å¯¼å‡ºä¸º JSON æ–‡ä»¶ï¼Œç”¨äºå¤‡ä»½æˆ–è¿ç§»ã€‚</p>
    <button class="btn btn-primary" onclick="exportData()">ğŸ“¥ å¯¼å‡º JSON</button>
  </div>
  <div class="card">
    <h3 style="margin-bottom:12px">å¯¼å…¥æ•°æ®</h3>
    <p style="color:var(--text2);font-size:13px;margin-bottom:12px">ä» JSON æ–‡ä»¶æ¢å¤æ•°æ®ã€‚æ³¨æ„ï¼šå°†è¦†ç›–å½“å‰æ‰€æœ‰æ•°æ®ã€‚</p>
    <input type="file" id="importFile" accept=".json" style="display:none" onchange="importData(event)">
    <button class="btn btn-outline" onclick="document.getElementById('importFile').click()">ğŸ“¤ é€‰æ‹©æ–‡ä»¶å¯¼å…¥</button>
  </div>
  <div class="card">
    <h3 style="margin-bottom:12px;color:var(--danger)">æ¸…ç©ºæ•°æ®</h3>
    <p style="color:var(--text2);font-size:13px;margin-bottom:12px">åˆ é™¤æ‰€æœ‰èµ„äº§å’Œè´Ÿå€ºè®°å½•ï¼Œæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚</p>
    <button class="btn btn-danger" onclick="clearAllData()">ğŸ—‘ï¸ æ¸…ç©ºæ‰€æœ‰æ•°æ®</button>
  </div>
  </div>
</div>

</div>
</div>

<!-- å¼¹çª— -->
<div class="modal-overlay" id="modalOverlay" onclick="if(event.target===this)closeModal()">
  <div class="modal">
    <div class="modal-title" id="modalTitle">æ·»åŠ </div>
    <form id="modalForm" onsubmit="saveItem(event)">
      <input type="hidden" id="itemId">
      <input type="hidden" id="itemType">
      <div id="fieldsGeneral">
        <div class="form-group"><label>ç±»åˆ«</label><select id="fieldCategory"><option value="">è¯·é€‰æ‹©</option></select></div>
        <div class="form-group"><label>åç§°</label><input type="text" id="fieldName" placeholder="ä¾‹å¦‚ï¼šæ‹›å•†é“¶è¡Œæ´»æœŸ" required></div>
        <div class="form-row">
          <div class="form-group"><label>å¸ç§</label>
            <select id="fieldCurrency">
              <option value="CNY">ğŸ‡¨ğŸ‡³ äººæ°‘å¸ (CNY)</option>
              <option value="USD">ğŸ‡ºğŸ‡¸ ç¾å…ƒ (USD)</option>
              <option value="EUR">ğŸ‡ªğŸ‡º æ¬§å…ƒ (EUR)</option>
              <option value="GBP">ğŸ‡¬ğŸ‡§ è‹±é•‘ (GBP)</option>
              <option value="JPY">ğŸ‡¯ğŸ‡µ æ—¥å…ƒ (JPY)</option>
              <option value="HKD">ğŸ‡­ğŸ‡° æ¸¯å¸ (HKD)</option>
              <option value="USDT">ğŸ’² USDT</option>
            </select>
          </div>
          <div class="form-group" id="fieldAmountGroup"><label>é‡‘é¢</label><input type="number" id="fieldAmount" step="0.01" placeholder="0.00" required></div>
        </div>
        <div id="fieldsAssetExtra" style="display:none">
          <div class="form-row">
            <div class="form-group"><label>å¹´åŒ–æ”¶ç›Šç‡ (%)</label><input type="number" id="assetAnnualRate" step="0.01" placeholder="ä¾‹å¦‚ï¼š2.5"><div class="hint">å¡«å†™åè‡ªåŠ¨è®¡ç®—æœˆ/å¹´æ”¶ç›Š</div></div>
          </div>
        </div>
        <div class="form-group"><label>å¤‡æ³¨</label><input type="text" id="fieldNote" placeholder="å¯é€‰"></div>
      </div>
      <div id="fieldsLiabilityExtra" style="display:none">
        <hr class="section-divider">
        <div class="form-row">
          <div class="form-group"><label>è´·æ¬¾æ€»é¢ (Â¥)</label><input type="number" id="liabTotalDebt" step="0.01" placeholder="ä¾‹å¦‚ï¼š324000"></div>
          <div class="form-group"><label>æ€»æœŸæ•° (æœˆ)</label><input type="number" id="liabTotalPeriods" min="1" placeholder="ä¾‹å¦‚ï¼š60"></div>
        </div>
        <div class="form-row">
          <div class="form-group"><label>å·²è¿˜æœŸæ•°</label><input type="number" id="liabPaidPeriods" min="0" placeholder="ä¾‹å¦‚ï¼š12"></div>
          <div class="form-group"><label>èµ·å§‹æ—¥æœŸ</label><input type="date" id="liabStartDate"></div>
        </div>
        <hr class="section-divider">
        <div class="form-row">
          <div class="form-group"><label>æ¯æœˆè¿˜æœ¬é‡‘ (Â¥)</label><input type="number" id="liabMonthlyPrincipal" step="0.01" placeholder="0.00"><div class="hint">è´·æ¬¾æ€»é¢Ã·æ€»æœŸæ•°è‡ªåŠ¨ç®—</div></div>
          <div class="form-group"><label>æ¯æœˆåˆ©æ¯ (Â¥)</label><input type="number" id="liabMonthlyInterest" step="0.01" placeholder="0.00"></div>
        </div>
        <div class="form-row">
          <div class="form-group"><label>è´¹ç‡ (%)</label><input type="number" id="liabFeeRate" step="0.001" placeholder="ä¾‹å¦‚ï¼š0.433"></div>
          <div class="form-group"><label>æ¯æœˆè¿˜æ¬¾æ—¥</label><input type="number" id="liabRepayDay" min="1" max="31" placeholder="ä¾‹å¦‚ï¼š21"></div>
        </div>
      </div>
      <div id="fieldsLoan" style="display:none">
        <div class="form-group"><label>å€Ÿæ¬¾äºº</label><input type="text" id="loanBorrower" placeholder="å€Ÿç»™è°"></div>
        <div class="form-group"><label>æœ¬é‡‘ (Â¥)</label><input type="number" id="loanPrincipal" step="0.01" placeholder="0.00"></div>
        <div class="form-row">
          <div class="form-group"><label>åˆ©ç‡ (%)</label><input type="number" id="loanRate" step="0.01" placeholder="ä¾‹å¦‚ï¼š5"></div>
          <div class="form-group"><label>åˆ©ç‡ç±»å‹</label>
            <select id="loanRateType"><option value="year">å¹´åˆ©ç‡</option><option value="month">æœˆåˆ©ç‡</option><option value="day">æ—¥åˆ©ç‡</option></select>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group"><label>èµ·å§‹æ—¥æœŸ</label><input type="date" id="loanStartDate"></div>
          <div class="form-group"><label>æ¯æœˆè¿˜æ¬¾æ—¥</label><input type="number" id="loanRepayDay" min="1" max="31" placeholder="ä¾‹å¦‚ï¼š15"><div class="hint">æŒ‰æ­¤æ—¥æœŸè®¡ç®—åˆ©æ¯å‘¨æœŸ</div></div>
        </div>
        <div class="form-group"><label>å·²æ”¶æœŸæ•°</label><input type="number" id="loanPaidPeriods" min="0" placeholder="æ‰‹åŠ¨å¡«å†™å·²æ”¶åˆ©æ¯æœŸæ•°"><div class="hint">å¡«å†™åä¼˜å…ˆä½¿ç”¨æ­¤å€¼</div></div>
        <div class="form-group"><label>å¤‡æ³¨</label><input type="text" id="loanNote" placeholder="å¯é€‰"></div>
      </div>
      <div id="fieldsIncome" style="display:none">
        <div class="form-group"><label>ç±»åˆ«</label>
          <select id="incomeCategory">
            <option value="">è¯·é€‰æ‹©</option>
            <option value="æ‰“å·¥/ä¸Šç­">æ‰“å·¥/ä¸Šç­</option>
            <option value="ä¼ä¸šç»è¥">ä¼ä¸šç»è¥</option>
            <option value="å…¬å¸åˆ†çº¢">å…¬å¸åˆ†çº¢</option>
            <option value="å…¼èŒå‰¯ä¸š">å…¼èŒå‰¯ä¸š</option>
            <option value="è‡ªç”±èŒä¸š">è‡ªç”±èŒä¸š</option>
            <option value="å…¶ä»–æ”¶å…¥">å…¶ä»–æ”¶å…¥</option>
          </select>
        </div>
        <div class="form-group"><label>åç§°</label><input type="text" id="incomeName" placeholder="ä¾‹å¦‚ï¼šXXå…¬å¸å·¥èµ„"></div>
        <div class="form-group"><label>æœˆæ”¶å…¥ (Â¥)</label><input type="number" id="incomeAmount" step="0.01" placeholder="0.00"></div>
        <div class="form-group"><label>å¤‡æ³¨</label><input type="text" id="incomeNote" placeholder="å¯é€‰"></div>
      </div>
      <div class="modal-actions">
        <button type="button" class="btn btn-outline" onclick="closeModal()">å–æ¶ˆ</button>
        <button type="submit" class="btn btn-primary">ä¿å­˜</button>
      </div>
    </form>
  </div>
</div>
<script src="app.js?v=20260221"></script>
</body>
</html>
